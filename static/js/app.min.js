"use strict";var _={id:function(e){return _.isString(e)?document.getElementById(e):(console.error("No valid selector given."),null)},class:function(e,t){return _.isString(e)?(void 0===t&&(t=document),_.isElement(t)?t.getElementsByClassName(e):(console.error("The context given is not a HTML element."),null)):(console.error("No valid selector given."),null)},tag:function(e,t){return _.isString(e)?(void 0===t&&(t=document),_.isElement(t)?t.getElementsByTagName(e):(console.error("The context given is not a HTML element."),null)):(console.error("No valid selector given."),null)},select:function(e,t,n){if(!_.isString(e))return console.error("No valid selector given."),null;if(void 0===t&&(t=document),!_.isElement(t))return console.error("The context given is not a HTML element."),null;if(/^(#|\.)?[\w\-]+$/.test(e)){switch(e.charAt(0)){case"#":return[t.getElementById(e.substr(1))];case".":return t.getElementsByClassName(e.substr(1).replace(/\./g," "))}return t.getElementsByTagName(e)}if(t.querySelectorAll)return t.querySelectorAll(e);_.isFunction(n)&&n()},contains:function(e,t){return _.isElement(e)?_.isElement(t)?e!=t&&e.contains(t):(console.error("No valid child HTML element given."),null):(console.error("No valid parent HTML element given."),null)},create:function(e,t){if(!_.isString(e))return console.error("No string given.");if(void 0!==t){if(!_.isObject(t))return console.error("The settings given as a parameter have to be an object.")}else t={};var n=e.match(/#[^\.#\s]+/g),i=e.match(/\.[^#\s\.]+/g),a=document.createElement(e.replace(/#[^\.#\s]+|\.[^#\s]+|\s/g,""));for(var r in n&&(a.id=n[0].replace(/#/,"")),i&&(a.className=i.join(" ").replace(/\./g,"")),t)if(t.hasOwnProperty.call(t,r))switch(r){case"innerHTML":a.innerHTML=t[r];break;case"style":for(var o in t[r])a.style.setProperty(o,t[r][o]);break;default:a.setAttribute(r,t[r])}return a},append:function(e,t){return _.isElement(e)?_.isElement(t)||_.isNumber(t)||_.isString(t)?((_.isString(t)||_.isNumber(t))&&(t=document.createTextNode(t)),void e.appendChild(t)):console.error("Second given parameter is neither a HTML element, text or a number."):console.error("First given element does not exist.")},prepend:function(e,t){return _.isElement(e)?_.isElement(t)||_.isNumber(t)||_.isString(t)?((_.isString(t)||_.isNumber(t))&&(t=document.createTextNode(t)),void e.insertBefore(t,e.childNodes[0])):console.error("Second given parameter is neither a HTML element, text or a number."):console.error("First given element does not exist.")},after:function(e,t){return _.isElement(e)?_.isElement(t)||_.isNumber(t)||_.isString(t)?((_.isString(t)||_.isNumber(t))&&(t=document.createTextNode(t)),void e.parentNode.insertBefore(t,e.nextSibling)):console.error("Second given parameter is neither a HTML element, text or a number."):console.error("First given element does not exist.")},before:function(e,t){return _.isElement(e)?_.isElement(t)||_.isNumber(t)||_.isString(t)?((_.isString(t)||_.isNumber(t))&&(t=document.createTextNode(t)),void e.insertBefore(t,e)):console.error("Second given parameter is neither a HTML element, text or a number."):console.error("First given element does not exist.")},remove:function(e){_.isElement(e)&&e.parentNode.removeChild(e)},empty:function(e){if(!_.isElement(e))return console.error("Element does not exist.");e.innerHTML=""},addEvent:function(e,t,n,i){return _.isElement(e)||e==window?_.isString(t)?_.isFunction(n)?(!0!==i&&(i=!1),void("addEventListener"in document.documentElement?e.addEventListener(t,n,i):e.attachEvent("on"+t,n))):console.error("No function was given."):console.error("No event name was given."):console.error("Element does not exist.")},removeEvent:function(e,t,n,i){return _.isElement(e)||e==window?_.isString(t)?_.isFunction(n)?(!0!==i&&(i=!1),void("removeEventListener"in document.documentElement?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n))):console.error("No function was given."):console.error("No event name was given."):console.error("Element does not exist.")},onClick:function(e,t,n){_.addEvent(e,"click",t,n)},removeClick:function(e,t,n){_.removeEvent(e,"click",t,n)},onInput:function(e,t,n){_.addEvent(e,"input",t,n)},removeInput:function(e,t,n){_.removeEvent(e,"input",t,n)},onLoad:function(e,t,n){_.addEvent(e,"load",t,n)},removeLoad:function(e,t,n){_.removeEvent(e,"load",t,n)},target:function(e){return _.exists(e)?e.target||e.srcElement:console.error("No valid event given.")},preventDefault:function(e){e.preventDefault(),e.stopPropagation()},addClass:function(e,t){return _.isElement(e)?_.isString(t)?void("classList"in document.documentElement?e.classList.add(t):-1==e.className.split(" ").indexOf(t)&&(e.className+=" "+t)):console.error("No class name was given."):console.error("Element does not exist.")},removeClass:function(e,t){return _.isElement(e)?_.isString(t)?void("classList"in document.documentElement?e.classList.remove(t):e.className=e.className.replace(new RegExp("\b"+_.escapeRegex(t)+"\b","g")," ")):console.error("No class name was given."):console.error("Element does not exist.")},toggleClass:function(e,t){return _.isElement(e)?_.isString(t)?void(_.hasClass(e,t)?_.removeClass(e,t):_.addClass(e,t)):console.error("No class name was given."):console.error("Element does not exist.")},hasClass:function(e,t){return _.isElement(e)?_.isString(t)?"classList"in document.documentElement?e.classList.contains(t):-1!=e.className.split(" ").indexOf(t):console.error("No class name was given."):console.error("Element does not exist.")},getStyle:function(e,t){return _.isElement(e)?_.isString(t)?"getComputedStyle"in window?window.getComputedStyle(e,null).getPropertyValue(t):"currentStyle"in document.documentElement?e.currentStyle[t]:void 0:console.error("Given style is not a string."):console.error("Element is not defined.")},setStyles:function(e,t){if(!_.isElement(e))return console.error("Element is not defined.");if(!_.isObject(t))return console.error("No valid styles object given.");for(var n in t)e.style.setProperty(n,t[n])},getHeight:function(e){if(!_.isElement(e))return console.error("Element is not defined.");var t=e.getBoundingClientRect();return t.bottom-t.top},getWidth:function(e){if(!_.isElement(e))return console.error("Element is not defined.");var t=e.getBoundingClientRect();return t.right-t.left},exists:function(e){return null!=e},isElement:function(e){return e instanceof Element||e instanceof HTMLDocument},isElementInDOM:function(e){return!!_.isElement(e)&&document.documentElement.contains(e)},isNodelist:function(e){return NodeList.prototype.isPrototypeOf(e)},isHTMLCollection:function(e){return HTMLCollection.prototype.isPrototypeOf(e)},isFunction:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isArray:function(e){return null!=e&&e.constructor===Array},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isInteger:function(e){return"number"==typeof e&&e%1==0},isFloat:function(e){return"number"==typeof e&&e%1!=0},escapeRegex:function(e){return _.isString(class_)?(""+e).replace(/[\.\*\+\?\^\$\{\}\(\)\|\[\]\\\/\-]/g,"\\$&"):console.error("No string was given.")},encodeHTML:function(e){return _.isString(e)?(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):console.error("No string was given.")},decodeHTML:function(e){return _.isString(class_)?(""+e).replace(/\&amp\;/g,"&").replace(/\&lt\;/g,"<").replace(/\&gt\;/g,">").replace(/\&quot\;/g,'"').replace(/\&#039\;/g,"'"):console.error("No string was given.")},escapeDoubleQuotes:function(e){return e.replace(/\\([\s\S])|(")/g,"\\$1$2")},parseJSON:function(e){if(!_.isString(e))return console.error("No string was given.");var t=null;try{t=JSON.parse(e)}catch(e){console.error("Could not parse the given string as JSON, because of a "+e)}return t},getMean:function(e){for(var t=0,n=e.length,i=0;i<n;i++)t+=e[i];return t/n},getMin:function(e,t){for(var n=_.isNumber(t)?t:Number.MAX_VALUE,i=e.length,a=0;a<i;a++){var r=e[a];r<n&&(n=r)}return n},getMax:function(e,t){for(var n=_.isNumber(t)?t:Number.MIN_VALUE,i=e.length,a=0;a<i;a++){var r=e[a];n<r&&(n=r)}return n},limitNumber:function(e,t,n,i){return e<t?(e=t,_.isFunction(i)&&i(t)):n<e&&(e=n,_.isFunction(i)&&i(n)),e},truncate:function(e){return _.isNumber(e)?e<0?Math.ceil(e):Math.floor(e):(console.error("No number given."),e)},sortArrayObjects:function(e,n,t){return t?e.sort(function(e,t){return e[n]<t[n]?1:-1}):e.sort(function(e,t){return e[n]>t[n]?1:-1})},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty.call(e,t))return!1;return JSON.stringify(e)===JSON.stringify({})},removeArrayIndex:function(e,t){for(var n=e.length,i=t;i<n-1;i++)e[i]=e[i+1];return e.pop(),e},getObjectSize:function(e){return Object.keys(e).length}},NODE={html:_.tag("html")[0],head:_.tag("head")[0],body:_.tag("body")[0],data_load_btn:_.id("load-data"),play_btn:_.id("play-button"),pause_btn:_.id("pause-button"),stop_btn:_.id("stop-button"),settings_btn:_.id("settings-button"),settings_window:_.id("settings-window"),settings_close_btn:null,settings_overlay:null,darkmode_btn:_.id("toggle-darkmode"),speed_selection:{container_1:_.id("pre-defined-speed"),container_2:_.id("custom-speed"),input:_.id("custom-speed-input"),custom:_.id("open-custom-speed-menu"),close_custom:_.id("close-custom-speed-menu")},speed_btn:{slow:_.id("half-speed"),normal:_.id("normal-speed"),fast:_.id("double-speed")},data_load:{window:_.id("data-load-window"),close_btn:null,blur:null,drop_area:_.id("drop-area"),select_file_input:_.id("selected-file"),example_sets_area:_.id("example-set-area"),notice:_.id("file-reader-notice")},initializeDataLoadWindow:function(){var e=this.data_load;e.close_btn=_.class("close",e.window)[0],e.blur=_.class("blur",e.window)[0],delete this.initializeDataLoadWindow},compare_items:{window:_.id("compare-items-window"),close_btn:null,blur:null,unselected_area:null,selected_area:null},initializeCompareItemsWindow:function(){var e=this.compare_items;e.close_btn=_.class("close",e.window)[0],e.blur=_.class("blur",e.window)[0],e.unselected_area=_.class("unselected-area",e.window)[0],e.selected_area=_.class("selected-area",e.window)[0],delete this.initializeCompareItemsWindow},chart_container_1:_.id("chart-container-1"),current_value:{container:_.id("data-set-current-value"),value:null,indicator:null},data_set_info:{title:null,date:null},bar_chart:_.id("bar-chart"),ratio_chart_total:_.id("ratio-total"),ratio_chart_container:_.id("ratio-chart"),ratio_chart:null,initializeBarChart:function(){var e=_.id("data-set-info");this.data_set_info.title=_.class("title",e)[0],this.data_set_info.date=_.class("date",e)[0];var t=this.current_value;t.value=_.class("value",t.container)[0],t.indicator=_.class("indicator",t.container)[0],this.ratio_chart=_.tag("tr",this.ratio_chart_container)[0],delete this.initializeBarChart},chart_container_2:_.id("chart-container-2"),line_chart:_.id("line-chart"),line_chart_menu:_.id("line-chart-menu"),close_line_chart_btn:_.id("close-line-chart"),download_png_btn:_.id("download-line-chart"),compare_btn:_.id("compare-btn"),statistics:_.id("statistics"),initialize:function(){this.initializeDataLoadWindow(),this.initializeBarChart(),this.initializeCompareItemsWindow(),delete this.initialize}},MSG={type:{NORMAL:"normal",ERROR:"error",WARNING:"warning"},element:void 0,close_timer:null,hide_animation_timer:null,generateHTML:function(e,t){return _.create("div#overlay-message."+t,{innerHTML:_.encodeHTML(e)})},show:function(e,t,n){if(MSG.hide(),_.isNumber(t)||(t=3500),t<800)return console.error("Message must appear for at least 400ms.");void 0===n&&(n=MSG.type.NORMAL),MSG.element=MSG.generateHTML(e,n),_.append(NODE.html,MSG.element),MSG.close_timer=setTimeout(MSG.hide,t),MSG.hide_animation_timer=setTimeout(function(){_.addClass(MSG.element,"hide")},t-200)},error:function(e,t){MSG.show(e,t,MSG.type.ERROR)},warn:function(e,t){MSG.show(e,t,MSG.type.WARNING)},hide:function(){clearTimeout(MSG.close_timer),clearTimeout(MSG.hide_animation_timer),_.isElement(MSG.element)&&(_.remove(MSG.element),MSG.element=void 0)}},FOCUS_CHAIN={selection_type:0,elems:[],start_elem:null,end_elem:null,elems_container:null,set:function(e,t,n){document.activeElement.blur(),void 0===t&&void 0===n?(FOCUS_CHAIN.selection_type=1,FOCUS_CHAIN.elems=e):(FOCUS_CHAIN.selection_type=2,FOCUS_CHAIN.start_elem=e,FOCUS_CHAIN.end_elem=t,FOCUS_CHAIN.elems_container=n),_.addEvent(window,"keydown",FOCUS_CHAIN.event)},reset:function(){FOCUS_CHAIN.selection_type=0,FOCUS_CHAIN.elems=[],FOCUS_CHAIN.start_elem=null,FOCUS_CHAIN.end_elem=null,FOCUS_CHAIN.elems_container=null,_.removeEvent(window,"keydown",FOCUS_CHAIN.event)},event:function(e){if(9==e.keyCode){if(1==FOCUS_CHAIN.selection_type){if(FOCUS_CHAIN.elems.length<1)return;e.preventDefault()}1==FOCUS_CHAIN.selection_type?FOCUS_CHAIN.handleSelectionType1():FOCUS_CHAIN.handleSelectionType2(e)}},handleSelectionType1:function(){if(1!=FOCUS_CHAIN.elems.length)for(var e=FOCUS_CHAIN.elems.length;e--;)if(document.activeElement==FOCUS_CHAIN.elems[e])return void(e==FOCUS_CHAIN.elems.length-1?FOCUS_CHAIN.elems[0].focus():FOCUS_CHAIN.elems[e+1].focus());FOCUS_CHAIN.elems[0].focus()},handleSelectionType2:function(e){if(document.activeElement==FOCUS_CHAIN.end_elem)return e.preventDefault(),void FOCUS_CHAIN.start_elem.focus();setTimeout(function(){_.contains(FOCUS_CHAIN.elems_container,document.activeElement)||(e.preventDefault(),FOCUS_CHAIN.start_elem.focus())},5)}},NAV={darkmode:!1,line_chart_opened:!1,initialize:function(){_.onClick(NODE.data_load_btn,DATA_LOAD.openWindow),_.onClick(NODE.play_btn,ANIMATOR.play),_.onClick(NODE.pause_btn,ANIMATOR.pause),_.onClick(NODE.stop_btn,ANIMATOR.stop),NAV.initializeSettingsWindow(),delete NAV.initialize},initializeSettingsWindow:function(){_.onClick(NODE.settings_btn,NAV.openSettingsWindow),NODE.settings_close_btn=_.class("close",NODE.settings_window)[0],_.onClick(NODE.settings_close_btn,NAV.closeSettingsWindow),NODE.settings_overlay=_.class("blur",NODE.settings_window)[0],_.onClick(NODE.settings_overlay,NAV.closeSettingsWindow),_.onClick(NODE.darkmode_btn,NAV.toggleDarkMode),_.onClick(NODE.speed_btn.slow,NAV.setSpeed),_.onClick(NODE.speed_btn.normal,NAV.setSpeed),_.onClick(NODE.speed_btn.fast,NAV.setSpeed),_.addEvent(NODE.speed_selection.input,"input",NAV.setCustomSpeed),_.onClick(NODE.speed_selection.custom,NAV.showCustomSpeedMenu),_.onClick(NODE.speed_selection.close_custom,NAV.showDefinedSpeedMenu),_.onClick(NODE.close_line_chart_btn,NAV.showBarChart),_.onClick(NODE.download_png_btn,NAV.downloadLineChart),_.onClick(NODE.compare_btn,COMPARE_ITEMS.openWindow),delete NAV.initializeSettingsWindow},openSettingsWindow:function(){_.addClass(NODE.settings_window,"visible"),NODE.settings_window.setAttribute("aria-hidden","false"),FOCUS_CHAIN.set(NODE.darkmode_btn,NODE.settings_close_btn,NODE.settings_window)},closeSettingsWindow:function(){_.removeClass(NODE.settings_window,"visible"),NODE.settings_window.setAttribute("aria-hidden","true"),FOCUS_CHAIN.reset(),NODE.settings_btn.focus()},toggleDarkMode:function(){NAV.darkmode=!NAV.darkmode,_[(NAV.darkmode?"add":"remove")+"Class"](NODE.html,"dark-mode"),MSG.show("Toggled dark mode.",1300),ANIMATOR.refreshFrame()},enableButton:function(e){_.addClass(e,"active"),e.setAttribute("aria-disabled","false"),e.setAttribute("originalTabIndex",e.getAttribute("tabIndex")),e.setAttribute("tabIndex","-1")},disableButton:function(e){_.removeClass(e,"active"),e.setAttribute("aria-disabled","true");var t=e.getAttribute("originalTabIndex");null==t&&(t=e.getAttribute("tabIndex"),e.setAttribute("originalTabIndex",t)),e.setAttribute("tabIndex",t)},onlyEnableButton:function(e){var t=NODE.speed_btn;for(var n in t)t[n]===e?this.enableButton(t[n]):this.disableButton(t[n])},showBarChart:function(){NAV.line_chart_opened=!1,_.addClass(NODE.chart_container_1,"active"),_.removeClass(NODE.chart_container_2,"active"),_.addClass(NODE.statistics,"active"),ANIMATOR.refreshFrame()},showLineChart:function(){NAV.line_chart_opened=!0,_.removeClass(NODE.chart_container_1,"active"),_.addClass(NODE.chart_container_2,"active"),_.removeClass(NODE.statistics,"active"),ANIMATOR.refreshFrame()},setSpeed:function(e){var t=_.target(e);if(!_.hasClass(t,"active")){NAV.onlyEnableButton(t);var n=1;switch(t.id){case"half-speed":n=.5;break;case"double-speed":n=2}MSG.show("Set speed to "+n+".",900),ANIMATOR.setSpeed(n)}},setCustomSpeed:function(e){var t=_.target(e),n=t.value;if(n.match(/[,]+/)&&(n=n.replace(/[,]+/,"."),t.value=n),n.match(/[^0-9\.]+/)&&(n=n.replace(/[^0-9\.]+/,""),t.value=n),n.match(/^([0-9]+|[0-9]+\.[0-9]+)$/)){if((n=parseFloat(n))%1!=0&&(n=n.toFixed(1)),n<.1||4<n)return MSG.error("Speed must be between 0.1 and 4."),void _.removeClass(t,"correct-speed");_.addClass(t,"correct-speed"),2<n&&MSG.warn("Speed values above 2 may produce lag."),ANIMATOR.setSpeed(n),(n+="")!=t.value&&(t.value=n)}else _.removeClass(t,"correct-speed")},showCustomSpeedMenu:function(){_.removeClass(NODE.speed_selection.container_1,"active"),_.addClass(NODE.speed_selection.container_2,"active");var e=NODE.speed_selection.input;e.value=ANIMATOR.speed+"",_.addClass(e,"correct-speed")},showDefinedSpeedMenu:function(){_.addClass(NODE.speed_selection.container_1,"active"),_.removeClass(NODE.speed_selection.container_2,"active");var e=0;e=_.hasClass(NODE.speed_btn.slow,"active")?.5:_.hasClass(NODE.speed_btn.normal,"active")?1:2,ANIMATOR.setSpeed(e)},downloadLineChart:function(){var e=NODE.line_chart.toDataURL("image/png"),t=new Date,n=t.getDate(),i=t.getMonth()+1,a=(9<n?"":"0")+n+"-"+(9<i?"":"0")+i+"-"+t.getFullYear()+" "+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds(),r="chart "+COMPARE_ITEMS.ids[0].replace(/[^a-z0-9\-\_]/g,"")+" "+a+".png",o=_.create("a",{download:r,href:e});_.append(NODE.body,o),o.click(),_.remove(o),MSG.show("Downloaded image.",1300)}},DATA_LOAD={initialize:function(){var e=NODE.data_load;_.onClick(e.blur,this.closeWindow),_.onClick(e.close_btn,this.closeWindow);for(var t=_.tag("button",e.example_sets_area),n=t.length,i=0;i<n;i++)_.onClick(t[i],function(e){var t="static/data/"+_.target(e).getAttribute("load-data")+".json";"file:"!==window.location.protocol?FILE.loadURL(t,!0):MSG.error("Error. Use the 'file drop are' below.")});_.isFunction(window.FileReader)||_.addClass(e.notice,"show"),_.addEvent(e.drop_area,"dragenter",_.preventDefault),_.addEvent(e.drop_area,"dragover",_.preventDefault),_.addEvent(e.drop_area,"dragleave",_.preventDefault),_.addEvent(e.drop_area,"drop",_.preventDefault),_.addEvent(e.drop_area,"dragenter",this.highlightDropArea),_.addEvent(e.drop_area,"dragover",this.highlightDropArea),_.addEvent(e.drop_area,"dragleave",this.unhighlightDropArea),_.addEvent(e.drop_area,"drop",this.unhighlightDropArea),_.addEvent(e.drop_area,"drop",function(e){var t=DATA_LOAD.getDroppedFile(e);FILE.process(t)}),_.addEvent(e.select_file_input,"change",function(){var e=this.files[0];FILE.process(e)})},openWindow:function(){_.addClass(NODE.data_load.window,"visible"),NODE.data_load.window.setAttribute("aria-hidden",!1);for(var e=[],t=_.class("data-set-btn",NODE.data_load.example_sets_area),n=0;n<t.length;n++)e.push(t[n]);e.push(NODE.data_load.select_file_input,NODE.data_load.close_btn),FOCUS_CHAIN.set(e)},closeWindow:function(){_.removeClass(NODE.data_load.window,"visible"),NODE.data_load.window.setAttribute("aria-hidden",!0),_.removeClass(NODE.data_load.window,"file-selected"),FOCUS_CHAIN.reset(),NODE.data_load_btn.focus()},highlightDropArea:function(){_.addClass(NODE.data_load.drop_area,"dragged-over")},unhighlightDropArea:function(){_.removeClass(NODE.data_load.drop_area,"dragged-over")},getDroppedFile:function(e){_.preventDefault(e);var t=!!e.dataTransfer.items,n=e.dataTransfer[t?"items":"files"],i=null;if(!(1<n.length)){if(t){if("file"!==n[0].kind)return void MSG.error("Do only drop files!");i=n[0].getAsFile()}else i=n[0];return i}MSG.error("Do not drop multiple files!")}},COMPARE_ITEMS={ids:[],id_num:0,setItemIds:function(e){COMPARE_ITEMS.ids=e,COMPARE_ITEMS.id_num=e.length,delete COMPARE_ITEMS.HAVE_CREATED_BUTTONS},addItemId:function(e){COMPARE_ITEMS.hasItemId(e)||(COMPARE_ITEMS.ids[COMPARE_ITEMS.id_num]=e,COMPARE_ITEMS.id_num++,delete COMPARE_ITEMS.HAVE_CREATED_BUTTONS)},removeItemId:function(e){for(var t=[],n=0;n<COMPARE_ITEMS.id_num;n++)COMPARE_ITEMS.ids[n]===e&&t.push(n);var i=t.length;for(n=0;n<i;n++)COMPARE_ITEMS.ids=_.removeArrayIndex(COMPARE_ITEMS.ids,t[n]),COMPARE_ITEMS.id_num--;delete COMPARE_ITEMS.HAVE_CREATED_BUTTONS},hasItemId:function(e){for(var t=0;t<COMPARE_ITEMS.id_num;t++)if(COMPARE_ITEMS.ids[t]===e)return!0;return!1},resetItemIds:function(){COMPARE_ITEMS.ids=[],COMPARE_ITEMS.id_num=0,delete COMPARE_ITEMS.HAVE_CREATED_BUTTONS},initialize:function(){_.onClick(NODE.compare_btn,this.openWindow),_.onClick(NODE.compare_items.blur,this.closeWindow),_.onClick(NODE.compare_items.close_btn,this.closeWindow)},openWindow:function(){void 0===COMPARE_ITEMS.HAVE_CREATED_BUTTONS&&(COMPARE_ITEMS.createButtons(),COMPARE_ITEMS.HAVE_CREATED_BUTTONS=!0),_.addClass(NODE.compare_items.window,"visible"),NODE.compare_items.window.setAttribute("aria-hidden",!1),COMPARE_ITEMS.orderButtons();for(var e=[],t=_.class("btn",NODE.compare_items.window),n=0;n<t.length;n++)e.push(t[n]);e.push(NODE.compare_items.close_btn),FOCUS_CHAIN.set(e)},closeWindow:function(){_.removeClass(NODE.compare_items.window,"visible"),NODE.compare_items.window.setAttribute("aria-hidden",!0),FOCUS_CHAIN.reset(),NODE.compare_btn.focus()},buttons:[],createButtons:function(){for(var e in _.empty(NODE.compare_items.selected_area),_.empty(NODE.compare_items.unselected_area),COMPARE_ITEMS.buttons=[],DATA.items){var t=DATA.items[e],n=_.create("button.btn.small.has-icon",{"item-id":e,innerHTML:t.name,style:{"background-image":"url("+t.icon+")"}});_.onClick(n,COMPARE_ITEMS.moveButton),COMPARE_ITEMS.buttons.push(n)}COMPARE_ITEMS.orderButtons()},orderButtons:function(){for(var e=COMPARE_ITEMS.buttons.length;e--;){for(var t=COMPARE_ITEMS.buttons[e],n=t.getAttribute("item-id"),i=!1,a=0;a<COMPARE_ITEMS.id_num;a++)if(COMPARE_ITEMS.ids[a]===n){i=!0;break}i?(_.append(NODE.compare_items.selected_area,t),_.addClass(t,"green"),t.title='Hide "'+DATA.items[n].name_escaped+'" in graph'):(_.append(NODE.compare_items.unselected_area,t),_.removeClass(t,"green"),t.title='Show "'+DATA.items[n].name_escaped+'" in graph')}},moveButton:function(e){var t=_.target(e),n=t.getAttribute("item-id"),i=!1;t.parentElement===NODE.compare_items.unselected_area&&(i=!0),i?(COMPARE_ITEMS.addItemId(n),_.append(NODE.compare_items.selected_area,t),_.addClass(t,"green"),t.title='Hide "'+DATA.items[n].name_escaped+'" in graph'):(COMPARE_ITEMS.removeItemId(n),_.append(NODE.compare_items.unselected_area,t),_.removeClass(t,"green"),t.title='Show "'+DATA.items[n].name_escaped+'" in graph'),ANIMATOR.refreshFrame()}},DATA={name:"",date:"",items:{},item_num:0,html:{},from:0,to:0,original:{},fixed:{},fixed_num:0,upscaled:{},upscaled_num:0,formatted:{},max:{},min:{},mean:{},total:[],total_formatted:[],total_max:[],total_min:[],total_mean:[],set:function(e){DATA.name=e.name,DATA.date=e.date,DATA.setItems(e.items),DATA.setRange(e.range.from,e.range.to),DATA.setDataPoints(e.data),DATA.calculateStatistics()},setItems:function(e){for(var t in DATA.items={},DATA.item_num=0,e)if(e.hasOwnProperty.call(e,t)){var n="";_.isString(typeof e[t].icon)&&(n=_.encodeHTML(e[t].icon)),DATA.items[t]={},DATA.items[t].name=_.encodeHTML(e[t].name),DATA.items[t].name_escaped=_.escapeDoubleQuotes(e[t].name),DATA.items[t].icon=n,DATA.items[t].color=DATA.getItemColor(DATA.item_num),DATA.items[t].position=DATA.item_num,DATA.item_num++}},setRange:function(e,t){this.from=e,this.to=t,ANIMATOR.tick=0},setDataPoints:function(e){DATA.original=e,DATA.calculateFixedData(),DATA.calculateUpscaledData()},getMax:function(e){return DATA.max[e]},getMin:function(e){return DATA.min[e]},getMean:function(e){return DATA.mean[e]},getTotalMax:function(e){return DATA.total_max[e]},getTotalMin:function(e){return DATA.total_min[e]},getTotalMean:function(e){return DATA.total_mean[e]},calculateFixedData:function(){DATA.fixed={},DATA.fixed_num=0;var e=DATA.original,t={};for(var n in e)if(e.hasOwnProperty.call(e,n)){t[n]=[];for(var i=e[n],a=-1,r=DATA.from;r<=DATA.to;r++)if(a++,void 0===i[r+""])if(r!=DATA.from){for(var o=t[n][a-1],s=null,l=0,d=r+1;d<=DATA.to;d++)if(l++,void 0!==i[d+""]){s=i[d+""];break}if(null!=s){var c=o+(s-o)/(1+l);t[n][a]=c}else t[n][a]=o}else t[n][a]=0;else{var _=i[r+""];t[n][a]=_}}DATA.fixed=t,DATA.fixed_num=Math.abs(DATA.to-DATA.from)+1},calculateUpscaledData:function(){DATA.upscaled={},DATA.formatted={};var e=DATA.upscaled_num=0,t={},n={};for(var i in DATA.fixed)if(DATA.fixed.hasOwnProperty.call(DATA.fixed,i)){t[i]=[],n[i]=[];for(var a=DATA.fixed[i],r=-1,o=0;o<DATA.fixed_num;o++){r++;var s=a[o];if(t[i][r]=s,n[i][r]=DATA.formatNumber(s),o==DATA.fixed_num-1)break;for(var l=(a[o+1]-s)/100,d=2;d<=98;d+=2){r++;var c=s+d*l;t[i][r]=c,n[i][r]=DATA.formatNumber(c)}}0==e&&(e=1,DATA.upscaled_num=t[i].length)}DATA.upscaled=t,DATA.formatted=n},calculateStatistics:function(){for(var e in DATA.max={},DATA.min={},DATA.mean={},DATA.fixed)if(DATA.fixed.hasOwnProperty.call(DATA.fixed,e)){var t=DATA.fixed[e],n=_.getMax(t);DATA.max[e]={value:n,formatted:DATA.formatNumber(n)};var i=_.getMin(t);DATA.min[e]={value:i,formatted:DATA.formatNumber(i)};var a=Number(_.getMean(t).toFixed(3));DATA.mean[e]={value:a,formatted:DATA.formatNumber(a)}}DATA.total=[],DATA.total_formatted=[],DATA.total_max=[],DATA.total_min=[],DATA.total_mean=[];for(var r=0;r<DATA.upscaled_num;r++){var o=0;n=Number.MIN_VALUE,i=Number.MAX_VALUE;for(var s in DATA.upscaled){var l=DATA.upscaled[s][r];n<l&&(n=l),l<i&&(i=l),o+=l}DATA.total[r]=o,DATA.total_formatted[r]=DATA.formatNumber(o),DATA.total_max[r]=n,DATA.total_min[r]=i,DATA.total_mean[r]=Number((o/DATA.upscaled_num).toFixed(3))}},getItemColor:function(e){var t=["#099b9b","#a52a2a","#9f8605","#556b2f","#8b008b","#1616ad","#bf775f","#888236","#5ebf5e","#9932cc","#3f238d","#800000","#a2651b","#808000","#800080"];return t[(e=_.truncate(e))%t.length]},number_names:{Thousand:Math.pow(10,3),Million:Math.pow(10,6),Billion:Math.pow(10,9),Trillion:Math.pow(10,12),Quadrillion:Math.pow(10,15),Quintillion:Math.pow(10,18),Sextillion:Math.pow(10,21),Septillion:Math.pow(10,24),Octillion:Math.pow(10,27),Nonillion:Math.pow(10,30),Decillion:Math.pow(10,33),Undecillion:Math.pow(10,36),Duodecillion:Math.pow(10,39),Tredecillion:Math.pow(10,42),"*10^45":Math.pow(10,45),"*10^48":Math.pow(10,48),"*10^51":Math.pow(10,51),"*10^54":Math.pow(10,54),"*10^57":Math.pow(10,57),"*10^60":Math.pow(10,60),"*10^63":Math.pow(10,63),"*10^66":Math.pow(10,66),"*10^69":Math.pow(10,69),"*10^72":Math.pow(10,72),"*10^75":Math.pow(10,75),"*10^78":Math.pow(10,78),"*10^81":Math.pow(10,81),"*10^84":Math.pow(10,84),"*10^87":Math.pow(10,87),"*10^90":Math.pow(10,90),"*10^93":Math.pow(10,93),"*10^96":Math.pow(10,96),"*10^99":Math.pow(10,99)},formatNumber:function(e){var t=e<0,n=t?"-":"";if(t&&(e*=-1),e<1e3)return n+e;for(var i in DATA.number_names){var a=DATA.number_names[i];if(a<=e&&e<1e3*a)return n+Number(e/a).toFixed(1)+" "+i}return n+"&infin;"}},FILE={loadURL:function(e,n){if("file:"!==window.location.protocol){var i=new XMLHttpRequest;return i.open("GET",e),i.send(),i.onreadystatechange=function(e){if(4===i.readyState&&200===i.status){var t=i.responseText;null!=t&&""!=t&&MAIN.initializeDataSet(t,n)}},i}console.error('The protocol for this HTML page is "file". The same-origin browser policy prevents loading files from web URLs.')},process:function(e){if(e)if(_.isFunction(window.FileReader))if(/\.(json|txt)$/.test(e.name)){if(2e4<e.size){var t="This data set is large ("+e.size/1e3+"KB) and may freeze your tab momentarily. Do you want to continue?";if(!confirm(t))return}var n=new FileReader;n.readAsText(e,"UTF-8"),n.onerror=function(e){MSG.error("File could not be read.")},n.onload=function(e){var t=_.target(e).result;MAIN.initializeDataSet(t,!0)}}else MSG.error("Only .json and .txt files are allowed.");else MSG.error("FileReader API is not supported in your browser. Update or switch browsers!");else console.error("File is not defined.")},getObjectFromJSON:function(e){var t=_.parseJSON(e);if(!t)return MSG.error("Could not parse the file as it's not valid JSON."),!1;var n=FILE.isValidData(t);return _.isString(n)?(MSG.error(n,7e3),!1):t},isValidData:function(e){if(void 0===e.name)return'"name" value is not defined.';if(!_.isString(e.name))return'"name" value must be a string.';if(void 0===e.date)return'"date" value must be defined.';if(!_.isString(e.date))return'"date" value must be a string.';if(void 0===e.items)return'"items" value must be defined.';if(_.isEmptyObject(e.items))return'"items" value must contain at least one item.';var t=[];for(var n in e.items)if(e.items.hasOwnProperty.call(e.items,n)){if(t.push(n),void 0===e.items[n].name)return'"name" value in item "'+n+'" is undefined.';if(!_.isString(e.items[n].name))return'"name" value in item "'+n+'" must be a string, but is of type "'+typeof e.items[n].name+'".';if(void 0!==e.items[n].icon&&!_.isString(e.items[n].icon))return'"icon" value in item "'+n+'" must be a string, but is of type "'+typeof e.items[n].icon+'".'}if(void 0===e.range)return'"range" value is not defined.';if(void 0===e.range.from)return'Range "from" value must be defined.';if(!_.isInteger(e.range.from))return'Range "from" value must be a number (integer).';if(void 0===e.range.to)return'Range "to" value is not defined.';if(!_.isInteger(e.range.to))return'Range "to" value must be a number (integer).';if(void 0===e.data)return'"data" value must be defined.';if(_.isEmptyObject(e.data))return'"data" value must contain data for at least one item.';for(var i=t.length,a=0;a<i;a++){var r=t[a];if(_.isEmptyObject(e.data[r]))return'No data points are defined in "'+r+'".';for(var o in e.data[r]){if(!o.match(/^\-?[0-9]+$/g))return'Name "'+o+'" in item "'+r+'" must be a whole number.';if(!_.isNumber(e.data[r][o]))return'Value of "'+o+'" in item "'+r+'" must be a number, but is of type '+typeof e.data[r][o]+"."}}return!0}},VISUALIZER={createCharts:function(){_.removeClass(NODE.ratio_chart_total,"hidden"),_.removeClass(NODE.ratio_chart_container,"hidden");var e=NODE.data_set_info;for(var t in e.title.innerHTML=DATA.name,e.date.innerHTML=DATA.date,_.empty(NODE.bar_chart),_.empty(NODE.ratio_chart),VISUALIZER.generateStatistics(),DATA.items)if(DATA.items.hasOwnProperty.call(DATA.items,t)){DATA.html[t]={};var n=VISUALIZER.getBar(t);_.append(NODE.bar_chart,n.container),DATA.html[t].bar_chart=n;var i=VISUALIZER.getRatioPart(t);_.append(NODE.ratio_chart,i.container),DATA.html[t].ratio_chart=i}_.removeClass(NODE.current_value.container,"hidden")},getBar:function(e){var t=DATA.items[e],n={id:e,name:t.name,name_escaped:t.name_escaped,icon:t.icon,color:t.color},i=_.create("button.bar-container"),a=_.create("div.bar"),r=_.create("div.meter",{style:{"background-color":n.color}}),o=_.create("div.name",{innerHTML:n.name}),s=_.create("div.value"),l=_.create("div.clickEvent",{title:"Open line chart for "+n.name_escaped,"item-id":n.id});_.onClick(l,VISUALIZER.openLineChartOnClick);var d=_.create("div.icon",{style:{"background-image":"url("+n.icon+")"}});return _.append(r,o),_.append(r,s),_.append(a,r),_.append(i,d),_.append(i,a),_.append(i,l),{container:i,meter:r,value:s}},getRatioPart:function(e){var t=DATA.items[e],n={id:e,name:t.name,color:t.color},i=_.create("td.part-container",{"item-id":n.id,style:{"background-color":n.color}}),a=_.create("div.percentage"),r=_.create("div"),o=_.create("button.clickEvent",{title:"Open line chart for "+n.name,"item-id":n.id});return _.onClick(o,VISUALIZER.openLineChartOnClick),_.append(a,r),_.append(i,a),_.append(i,o),{container:i,percentage:r}},openLineChartOnClick:function(e){var t=_.target(e).getAttribute("item-id");COMPARE_ITEMS.setItemIds([t]),NAV.showLineChart()},statistics:[],generateStatistics:function(){for(var e in _.empty(NODE.statistics),VISUALIZER.statistics=[],DATA.items){var t=DATA.items[e];VISUALIZER.statistics.push({name:t.name,icon:t.icon,mean:DATA.getMean(e),min:DATA.getMin(e),max:DATA.getMax(e)})}VISUALIZER.sortStatistics("max"),_.addClass(NODE.statistics,"has-content");var n=_.create("p.sorting-text",{innerHTML:"Sort by "});NODE.statistic_sort_btn=_.create("button",{innerHTML:"Max",title:"Change sorting metric"}),_.append(n,NODE.statistic_sort_btn),_.prepend(NODE.statistics,n),_.onClick(NODE.statistic_sort_btn,function(){var e="",t=NODE.statistic_sort_btn.innerHTML;switch(t){case"Max":e="Min",t="min";break;case"Min":e="Mean",t="mean";break;case"Mean":e="Max",t="max"}NODE.statistic_sort_btn.innerHTML=e,VISUALIZER.sortStatistics(t)})},getStatisticPart:function(e,t){var n=VISUALIZER.statistics[e],i=_.create("div.statistic"),a=_.create("div.icon",{style:{"background-image":"url("+n.icon+")"}}),r=_.create("div.name",{innerHTML:n.name}),o="";switch(t){case"max":o="<b>Max:</b> "+n.max.formatted+"<br><b>Min:</b> "+n.min.formatted+"<br><b>Mean:</b> "+n.mean.formatted;break;case"min":o="<b>Min:</b> "+n.min.formatted+"<br><b>Max:</b> "+n.max.formatted+"<br><b>Mean:</b> "+n.mean.formatted;break;case"mean":o="<b>Mean:</b> "+n.mean.formatted+"<br><b>Max:</b> "+n.max.formatted+"<br><b>Min:</b> "+n.min.formatted}var s=_.create("div.description",{innerHTML:o});return _.append(r,a),_.append(i,r),_.append(i,s),i},sortStatistics:function(n){for(var e=_.class("statistic",NODE.statistics),t=e.length;t--;)_.remove(e[t]);VISUALIZER.statistics.sort(function(e,t){return e[n].value<t[n].value});for(t=0;t<VISUALIZER.statistics.length;t++)_.append(NODE.statistics,VISUALIZER.getStatisticPart(t,n))}},ANIMATOR={is_running:!1,speed:1,tick:0,loop:null,initialize:function(){_.addEvent(window,"resize",function(){NAV.line_chart_opened&&ANIMATOR.refreshFrame()})},setSpeed:function(e){this.speed=e,this.is_running&&(this.stopLoop(),this.startLoop()),this.setCSSTransitions()},setCSSTransitions:function(){var e=1/this.speed/5+"s";for(var t in DATA.html){var n=DATA.html[t];_.setStyles(n.bar_chart.meter,{transition:e}),_.setStyles(n.ratio_chart.container,{transition:e})}_.setStyles(NODE.current_value.indicator,{transition:e})},startLoop:function(){var e=80/ANIMATOR.speed;ANIMATOR.loop=setInterval(ANIMATOR.update,e)},stopLoop:function(){clearInterval(ANIMATOR.loop),ANIMATOR.loop=null},play:function(){ANIMATOR.is_running=!0,_.removeClass(NODE.html,"animation-paused"),_.addClass(NODE.html,"animation-playing"),ANIMATOR.startLoop(),MSG.show("Started animation.",1e3)},pause:function(){ANIMATOR.is_running=!1,_.removeClass(NODE.html,"animation-playing"),_.addClass(NODE.html,"animation-paused"),ANIMATOR.stopLoop(),MSG.show("Paused animation.",1e3)},restart:function(){ANIMATOR.tick=0},end:function(){ANIMATOR.is_running=!1,ANIMATOR.tick=0,_.removeClass(NODE.html,"animation-playing"),_.addClass(NODE.html,"animation-paused"),ANIMATOR.stopLoop(),ANIMATOR.last_ratio_part_order=[];for(var e=_.class("part-container",NODE.ratio_chart),t=e.length;t--;){var n=e[t];_.removeClass(n,"changed-place"),n.removeAttribute("changed-places-counter")}},stop:function(){1<ANIMATOR.tick&&MSG.show("Stopped animation.",1e3),ANIMATOR.end(),ANIMATOR.update()},update:function(){_.isEmptyObject(DATA.upscaled)||(ANIMATOR.tick>=DATA.upscaled_num?ANIMATOR.end():(ANIMATOR.refreshFrame(),ANIMATOR.tick++))},refreshFrame:function(){if(ANIMATOR.tick%50==0){var e=parseInt(DATA.from)+(0==ANIMATOR.tick?0:ANIMATOR.tick/50);NODE.current_value.value.innerHTML=e,NODE.current_value.indicator.innerHTML=e}_.setStyles(NODE.current_value.indicator,{width:ANIMATOR.tick%50*2+"%"}),NAV.line_chart_opened?ANIMATOR.updateLineChart():(ANIMATOR.sortItems(),ANIMATOR.updateBarChart(),ANIMATOR.updateRatioChart())},items_sorted:[],sortItems:function(){ANIMATOR.items_sorted=[];var e=[],t=-1;for(var n in DATA.items)e[++t]={id:n,value:DATA.upscaled[n][ANIMATOR.tick]};ANIMATOR.items_sorted=_.sortArrayObjects(e,"value",!0)},updateBarChart:function(){var e=ANIMATOR.tick,t=DATA.getTotalMax(e),n=DATA.getTotalMin(e);0<n&&(n=0);for(var i in DATA.items){var a=DATA.upscaled[i][e],r=DATA.formatted[i][e],o=DATA.html[i].bar_chart;r!=o.value.innerHTML&&(o.value.innerHTML=r);var s=(a-n)/(t-n);_.setStyles(o.meter,{width:100*s+"%"})}for(var l=0;l<DATA.item_num;l++){i=ANIMATOR.items_sorted[l].id;var d=DATA.items[i].position;_.setStyles(DATA.html[i].bar_chart.container,{transform:"translate(0, "+52*(l-d)+"px)"})}},last_ratio_part_order:[],updateRatioChart:function(){var e=DATA.total[ANIMATOR.tick];NODE.ratio_chart_total.innerHTML=DATA.formatNumber(e);for(var t=DATA.item_num-1;0<=t;t--){var n=ANIMATOR.items_sorted[t].id,i=100/(e/DATA.upscaled[n][ANIMATOR.tick]),a=DATA.html[n].ratio_chart;if(i<.2)_.addClass(a.container,"hidden");else{_.removeClass(a.container,"hidden"),_.append(NODE.ratio_chart,a.container),_.setStyles(a.container,{width:i+"%"});var r=i.toFixed(1)+"%";a.percentage.innerHTML=r}}var o=_.class("part-container",NODE.ratio_chart),s=[];for(t=o.length;t--;){var l=o[t];s.push(l.getAttribute("item-id"))}if(s.length!=ANIMATOR.last_ratio_part_order.length&&(ANIMATOR.last_ratio_part_order=[]),0<ANIMATOR.last_ratio_part_order.length)for(t=s.length;t--;){var d=t,c=o[o.length-1-t],u=s[t];if(ANIMATOR.last_ratio_part_order.indexOf(u)!=d)_.addClass(c,"changed-place");else{var m=c.getAttribute("changed-places-counter");m?0<parseInt(m)?(m--,c.setAttribute("changed-places-counter",""+m)):(c.removeAttribute("changed-places-counter"),_.removeClass(c,"changed-place")):c.setAttribute("changed-places-counter","20")}}ANIMATOR.last_ratio_part_order=s},updateLineChart:function(){var e=NODE.line_chart,t=e.getContext("2d"),n=COMPARE_ITEMS.ids,i=COMPARE_ITEMS.id_num;if(0!=i){e.width=_.getWidth(NODE.line_chart_menu),e.height=500+18*(i-1),t.clearRect(0,0,e.width,e.height);for(var a=0,r=Number.MIN_VALUE,o=0;o<i;o++){var s=n[o],l=DATA.getMin(s).value;l<a&&(a=l);var d=DATA.getMax(s).value;r<d&&(r=d)}var c={top:5,left:5,bottom:80+18*i,right:null},u="12px Arial sans-serif",m=DATA.formatNumber(r)+"",A=DATA.formatNumber(a)+"";t.font=u;var f=t.measureText(m).width,p=t.measureText(A).width;c.right=f,c.right<p&&(c.right=p),c.right+=15;var v=e.width-c.right+5;for(o=0;o<2;o++){var h=0==o?m:A,g=0==o?c.top:e.height-c.bottom;t.font=u,t.fillStyle=NAV.darkmode?"#767676":"#b5b5b5",t.textBaseline=0==o?"top":"bottom",t.textAlign="left",t.fillText(h,v,g),t.stroke()}var T=e.width-c.left-c.right,N=e.height-c.bottom+20;for(o=DATA.from;o<=DATA.to;o++){var E=NAV.darkmode?"#242424":"#ededed",D=o==DATA.from?c.left:c.left+T*((o-DATA.from)/(DATA.fixed_num-1)),M=c.top,O=e.height-c.bottom;t.strokeStyle=E,t.moveTo(D,M),t.lineTo(D,O),t.stroke();var b=o+"",S=t.measureText(b).width,C=!1;100<S||(35<S?C=!0:window.innerWidth<=550&&(C=!0),C&&DATA.from!=o&&DATA.to!=o||(t.font=u,t.fillStyle=NAV.darkmode?"#767676":"#b5b5b5",t.textBaseline="bottom",t.textAlign=o==DATA.from?"left":o==DATA.to?"right":"center",t.fillText(b,D,N),t.stroke()))}var I="Arial sans-serif",w=NAV.darkmode?"#767676":"#b5b5b5",R=c.left,y=e.height-c.bottom+50;t.font="14px "+I,t.fillStyle=w,t.textBaseline="middle",t.textAlign="left",t.fillText("Legend",R,y),t.stroke();for(o=0;o<i;o++){var x=COMPARE_ITEMS.ids[o];ANIMATOR.drawLineGraph(e,t,c,x,a,r);var L=DATA.items[x].name_escaped,k=c.left+20,H=e.height-c.bottom+66+18*o;t.font="12px "+I,t.fillStyle=w,t.textBaseline="top",t.textAlign="left",t.fillText(L,k,H),t.stroke();var F=DATA.items[x].color,U=c.left+4;t.fillStyle=F,t.fillRect(U,H,10,10),t.stroke()}if(0!=ANIMATOR.tick&&ANIMATOR.tick!=DATA.upscaled_num-1){var P=(ANIMATOR.tick+1)/DATA.upscaled_num,V=c.left+T*P,B=c.top,G=e.height-c.bottom;t.strokeStyle="#ac6161",t.moveTo(V,B),t.lineTo(V,G),t.stroke()}}else e.width=0},drawLineGraph:function(e,t,n,i,a,r){var o=DATA.items[i].color,s=2*Math.PI,l=e.width-n.left-n.right,d=e.height-n.top-n.bottom;t.strokeStyle=o;for(var c=[],_=0;_<DATA.fixed_num;_++){var u=0==_?0:_/(DATA.fixed_num-1),m=n.left+l*u,A=(DATA.fixed[i][_]-a)/(r-a)*100,f=e.height-n.bottom;if(f-=d/(100/A),c[_]={x:m,y:f},t.beginPath(),t.arc(m,f,2,0,s),t.stroke(),0<_){var p=c[_-1].x,v=c[_-1].y;t.moveTo(m,f),t.lineTo(p,v),t.stroke()}}}},MAIN={initializeDataSet:function(e,t){NAV.showBarChart();var n=FILE.getObjectFromJSON(e);COMPARE_ITEMS.resetItemIds(),DATA.set(n),VISUALIZER.createCharts(),t&&(_.addClass(NODE.data_load.window,"file-selected"),FOCUS_CHAIN.set([NODE.data_load.close_btn])),ANIMATOR.setCSSTransitions(),ANIMATOR.end(),ANIMATOR.refreshFrame()},initialize:function(){(NODE.initialize(),NAV.initialize(),DATA_LOAD.initialize(),COMPARE_ITEMS.initialize(),ANIMATOR.initialize(),"file:"!==window.location.protocol)?FILE.loadURL("static/data/example-data-set.json",!1).onerror=function(){_.append(NODE.bar_chart,_.create("div.notice.red",{innerHTML:"Loading the example data set failed. This might be, because of a weak internet connection."}))}:_.append(NODE.bar_chart,_.create("div.notice.blue",{innerHTML:'To load a data set, click on "<b>Load data</b>" in the menu.'}))}};_.onLoad(window,MAIN.initialize);